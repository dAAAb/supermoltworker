# ç’°å¢ƒè®Šæ•¸åŒæ­¥ UI è¨­è¨ˆ

## åŠŸèƒ½ç›®æ¨™

è§£æ±ºã€Œå‰ä¸–è¨˜æ†¶ã€å•é¡Œçš„æ ¹æœ¬åŸå› ä¹‹ä¸€ï¼šclawdbot.json è¨­å®šèˆ‡ç’°å¢ƒè®Šæ•¸ä¸åŒæ­¥ã€‚

æä¾› Admin UI è®“ç”¨æˆ¶èƒ½å¤ ï¼š
1. ä¸€çœ¼çœ‹å‡ºå“ªäº›é—œéµè¨­å®šåªå­˜åœ¨ clawdbot.jsonï¼ˆæœ‰ä¸Ÿå¤±é¢¨éšªï¼‰
2. ä¸€éµç”¢ç”Ÿ `wrangler secret put` æŒ‡ä»¤ä¾†å‚™ä»½åˆ°ç’°å¢ƒè®Šæ•¸
3. äº†è§£å…©å¥—è¨­å®šç³»çµ±çš„ç‹€æ…‹å·®ç•°

---

## UI è¨­è¨ˆ

### æ–°å¢é é¢ï¼šSettings Syncï¼ˆè¨­å®šåŒæ­¥ï¼‰

ä½ç½®ï¼šAdmin UI â†’ æ–°å¢ Tabã€ŒSettings Syncã€æˆ–æ”¾åœ¨ Health é é¢ä¸‹æ–¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Settings Sync - è¨­å®šåŒæ­¥ç‹€æ…‹                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“Š åŒæ­¥æ‘˜è¦                                                      â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚   âœ… å·²åŒæ­¥: 3 é …    âš ï¸ æœªåŒæ­¥: 5 é …    â„¹ï¸ åƒ…ç’°å¢ƒè®Šæ•¸: 2 é …      â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”´ æ©Ÿå¯†è¨­å®š (Secrets)                                            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  è¨­å®šé …ç›®              clawdbot.json    ç’°å¢ƒè®Šæ•¸      ç‹€æ…‹        â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚
â”‚  â”‚  TELEGRAM_BOT_TOKEN    8369...Ges âœ“     â”€              âš ï¸ æœªåŒæ­¥ â”‚   â”‚
â”‚  â”‚  BRAVE_SEARCH_API_KEY  BSAka...Jry âœ“    â”€              âš ï¸ æœªåŒæ­¥ â”‚   â”‚
â”‚  â”‚  GATEWAY_AUTH_TOKEN    ea40e...12d âœ“    â”€              âš ï¸ æœªåŒæ­¥ â”‚   â”‚
â”‚  â”‚  ANTHROPIC_API_KEY     â”€                â”€              â”€ æœªè¨­å®š  â”‚   â”‚
â”‚  â”‚  OPENAI_API_KEY        â”€                â”€              â”€ æœªè¨­å®š  â”‚   â”‚
â”‚  â”‚  R2_ACCESS_KEY_ID      â”€                0562f...0f13 âœ“ âœ… ç’°å¢ƒè®Šæ•¸â”‚   â”‚
â”‚  â”‚  R2_SECRET_ACCESS_KEY  â”€                8af30...9284 âœ“ âœ… ç’°å¢ƒè®Šæ•¸â”‚   â”‚
â”‚  â”‚  CF_ACCOUNT_ID         â”€                3f1f8...2514 âœ“ âœ… ç’°å¢ƒè®Šæ•¸â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸŸ¡ Channel è¨­å®š                                                  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  è¨­å®šé …ç›®              clawdbot.json    ç’°å¢ƒè®Šæ•¸      ç‹€æ…‹        â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚
â”‚  â”‚  TELEGRAM_DM_POLICY    pairing âœ“        â”€              âš ï¸ æœªåŒæ­¥ â”‚   â”‚
â”‚  â”‚  TELEGRAM_GROUP_POLICY allowlist âœ“      â”€              âš ï¸ æœªåŒæ­¥ â”‚   â”‚
â”‚  â”‚  TELEGRAM_STREAM_MODE  partial âœ“        â”€              âš ï¸ æœªåŒæ­¥ â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸŸ¢ Agent/Model è¨­å®š                                              â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  è¨­å®šé …ç›®              clawdbot.json           ç’°å¢ƒè®Šæ•¸   ç‹€æ…‹    â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚
â”‚  â”‚  DEFAULT_MODEL         anthropic/claude-opus-4-5  â”€     âš ï¸ æœªåŒæ­¥â”‚   â”‚
â”‚  â”‚  WORKSPACE_PATH        /root/clawd âœ“              â”€     âš ï¸ æœªåŒæ­¥â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                         â”‚
â”‚  [ ğŸ“‹ è¤‡è£½æ‰€æœ‰æœªåŒæ­¥è¨­å®šçš„æŒ‡ä»¤ ]    [ ğŸ“‹ åƒ…è¤‡è£½æ©Ÿå¯†è¨­å®šæŒ‡ä»¤ ]           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é»æ“Šã€Œè¤‡è£½æŒ‡ä»¤ã€å¾Œé¡¯ç¤ºçš„ Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Wrangler ç’°å¢ƒè®Šæ•¸è¨­å®šæŒ‡ä»¤                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  è«‹åœ¨çµ‚ç«¯æ©ŸåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œå°‡è¨­å®šå‚™ä»½åˆ° Cloudflare ç’°å¢ƒè®Šæ•¸ï¼š             â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ # ğŸ”´ æ©Ÿå¯†è¨­å®š (å»ºè­°å„ªå…ˆè¨­å®š)                                     â”‚   â”‚
â”‚  â”‚ npx wrangler secret put TELEGRAM_BOT_TOKEN                       â”‚   â”‚
â”‚  â”‚ # è¼¸å…¥: 8369104641:AAFIxteKoWhJFRv1Uo4w5vbmqYdyu3O2Ges          â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚ npx wrangler secret put BRAVE_SEARCH_API_KEY                     â”‚   â”‚
â”‚  â”‚ # è¼¸å…¥: BSAka7HYWhwyQmy09w8pYih_SCfhJry                          â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚ npx wrangler secret put GATEWAY_AUTH_TOKEN                       â”‚   â”‚
â”‚  â”‚ # è¼¸å…¥: ea40eab44005a7e353f020f6dbbb81e9492ce795e2f1dc20ef4...   â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚ # ğŸŸ¡ Channel è¨­å®š                                                â”‚   â”‚
â”‚  â”‚ npx wrangler secret put TELEGRAM_DM_POLICY                       â”‚   â”‚
â”‚  â”‚ # è¼¸å…¥: pairing                                                   â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚ npx wrangler secret put TELEGRAM_GROUP_POLICY                    â”‚   â”‚
â”‚  â”‚ # è¼¸å…¥: allowlist                                                 â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚ # ... æ›´å¤šè¨­å®š ...                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  âš ï¸ æ³¨æ„ï¼š                                                              â”‚
â”‚  â€¢ é€™äº›æŒ‡ä»¤éœ€è¦åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹åŸ·è¡Œ                                         â”‚
â”‚  â€¢ åŸ·è¡Œå¾Œéœ€è¦é‡æ–°éƒ¨ç½²æ‰æœƒç”Ÿæ•ˆ                                           â”‚
â”‚  â€¢ æ©Ÿå¯†è³‡è¨Šè«‹å‹¿åˆ†äº«çµ¦ä»–äºº                                               â”‚
â”‚                                                                         â”‚
â”‚                                    [ ğŸ“‹ è¤‡è£½åˆ°å‰ªè²¼ç°¿ ]    [ é—œé–‰ ]      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è³‡æ–™çµæ§‹

### API Response

```typescript
// GET /api/admin/settings/sync-status
interface SettingsSyncStatus {
  summary: {
    synced: number;      // å…©é‚Šéƒ½æœ‰ä¸”ä¸€è‡´
    unsynced: number;    // clawdbot.json æœ‰ä½†ç’°å¢ƒè®Šæ•¸æ²’æœ‰
    envOnly: number;     // åªæœ‰ç’°å¢ƒè®Šæ•¸
    notSet: number;      // å…©é‚Šéƒ½æ²’æœ‰
  };

  categories: {
    secrets: SettingItem[];
    channels: SettingItem[];
    agents: SettingItem[];
    gateway: SettingItem[];
    other: SettingItem[];
  };
}

interface SettingItem {
  name: string;              // ç’°å¢ƒè®Šæ•¸åç¨±ï¼Œå¦‚ TELEGRAM_BOT_TOKEN
  displayName: string;       // é¡¯ç¤ºåç¨±ï¼Œå¦‚ "Telegram Bot Token"
  category: 'secrets' | 'channels' | 'agents' | 'gateway' | 'other';
  priority: 'critical' | 'important' | 'optional';

  configPath: string;        // clawdbot.json ä¸­çš„è·¯å¾‘ï¼Œå¦‚ "channels.telegram.botToken"
  configValue: string | null; // clawdbot.json ä¸­çš„å€¼ï¼ˆæ©Ÿå¯†æœƒé®è”½ï¼‰
  configValueRaw?: string;   // åŸå§‹å€¼ï¼ˆç”¨æ–¼ç”¢ç”ŸæŒ‡ä»¤ï¼Œä¸é¡¯ç¤ºåœ¨ UIï¼‰

  envValue: string | null;   // ç’°å¢ƒè®Šæ•¸çš„å€¼ï¼ˆæ©Ÿå¯†æœƒé®è”½ï¼‰
  envExists: boolean;        // ç’°å¢ƒè®Šæ•¸æ˜¯å¦å­˜åœ¨

  status: 'synced' | 'unsynced' | 'env_only' | 'not_set' | 'conflict';

  // å¦‚æœæœ‰è¡çª
  conflict?: {
    configValue: string;
    envValue: string;
    recommendation: 'use_config' | 'use_env';
  };
}
```

### è¨­å®šé …ç›®å°ç…§è¡¨

```typescript
const SETTING_DEFINITIONS: SettingDefinition[] = [
  // ğŸ”´ æ©Ÿå¯†è¨­å®š
  {
    name: 'TELEGRAM_BOT_TOKEN',
    displayName: 'Telegram Bot Token',
    category: 'secrets',
    priority: 'critical',
    configPath: 'channels.telegram.botToken',
    isSensitive: true,
  },
  {
    name: 'ANTHROPIC_API_KEY',
    displayName: 'Anthropic API Key',
    category: 'secrets',
    priority: 'critical',
    configPath: 'models.providers.anthropic.apiKey',
    isSensitive: true,
  },
  {
    name: 'OPENAI_API_KEY',
    displayName: 'OpenAI API Key',
    category: 'secrets',
    priority: 'critical',
    configPath: 'models.providers.openai.apiKey',
    isSensitive: true,
  },
  {
    name: 'BRAVE_SEARCH_API_KEY',
    displayName: 'Brave Search API Key',
    category: 'secrets',
    priority: 'critical',
    configPath: 'tools.web.search.apiKey',
    isSensitive: true,
  },
  {
    name: 'GATEWAY_AUTH_TOKEN',
    displayName: 'Gateway Auth Token',
    category: 'secrets',
    priority: 'critical',
    configPath: 'gateway.auth.token',
    isSensitive: true,
  },

  // ğŸŸ¡ Channel è¨­å®š
  {
    name: 'TELEGRAM_DM_POLICY',
    displayName: 'Telegram DM Policy',
    category: 'channels',
    priority: 'important',
    configPath: 'channels.telegram.dmPolicy',
    isSensitive: false,
  },
  {
    name: 'TELEGRAM_GROUP_POLICY',
    displayName: 'Telegram Group Policy',
    category: 'channels',
    priority: 'important',
    configPath: 'channels.telegram.groupPolicy',
    isSensitive: false,
  },
  {
    name: 'TELEGRAM_STREAM_MODE',
    displayName: 'Telegram Stream Mode',
    category: 'channels',
    priority: 'optional',
    configPath: 'channels.telegram.streamMode',
    isSensitive: false,
  },

  // ğŸŸ¢ Agent/Model è¨­å®š
  {
    name: 'DEFAULT_MODEL',
    displayName: 'Default Model',
    category: 'agents',
    priority: 'important',
    configPath: 'agents.defaults.model.primary',
    isSensitive: false,
  },
  {
    name: 'WORKSPACE_PATH',
    displayName: 'Workspace Path',
    category: 'agents',
    priority: 'optional',
    configPath: 'agents.defaults.workspace',
    isSensitive: false,
  },
  {
    name: 'MAX_CONCURRENT',
    displayName: 'Max Concurrent Agents',
    category: 'agents',
    priority: 'optional',
    configPath: 'agents.defaults.maxConcurrent',
    isSensitive: false,
  },

  // ğŸ”µ Gateway è¨­å®š
  {
    name: 'GATEWAY_PORT',
    displayName: 'Gateway Port',
    category: 'gateway',
    priority: 'optional',
    configPath: 'gateway.port',
    isSensitive: false,
  },
  {
    name: 'GATEWAY_MODE',
    displayName: 'Gateway Mode',
    category: 'gateway',
    priority: 'optional',
    configPath: 'gateway.mode',
    isSensitive: false,
  },

  // âšª å…¶ä»–è¨­å®š
  {
    name: 'ACK_REACTION_SCOPE',
    displayName: 'ACK Reaction Scope',
    category: 'other',
    priority: 'optional',
    configPath: 'messages.ackReactionScope',
    isSensitive: false,
  },
];
```

---

## API è¨­è¨ˆ

### æ–°å¢ç«¯é»

```
GET  /api/admin/settings/sync-status
     - è¿”å›æ‰€æœ‰è¨­å®šçš„åŒæ­¥ç‹€æ…‹

GET  /api/admin/settings/export-commands
     - è¿”å› wrangler secret put æŒ‡ä»¤åˆ—è¡¨
     - Query params:
       - category: 'all' | 'secrets' | 'channels' | 'agents' | 'gateway'
       - includeValues: boolean (é è¨­ trueï¼Œè¨­ç‚º false åªè¿”å›æŒ‡ä»¤ä¸å«å€¼)
```

### å¯¦ä½œæ³¨æ„äº‹é …

1. **ç’°å¢ƒè®Šæ•¸æª¢æ¸¬**ï¼š
   - Worker å¯ä»¥é€é `c.env.TELEGRAM_BOT_TOKEN` ç­‰æª¢æŸ¥ç’°å¢ƒè®Šæ•¸æ˜¯å¦å­˜åœ¨
   - ä½†å‡ºæ–¼å®‰å…¨è€ƒé‡ï¼Œç’°å¢ƒè®Šæ•¸çš„å€¼æœƒè¢«é®è”½é¡¯ç¤º

2. **clawdbot.json è®€å–**ï¼š
   - å¾å®¹å™¨å…§ `/root/.clawdbot/clawdbot.json` è®€å–
   - è§£æ JSON ä¸¦æŒ‰ç…§ configPath æå–å€¼

3. **æ©Ÿå¯†é®è”½**ï¼š
   - é¡¯ç¤ºæ™‚ï¼š`8369...Ges` (å‰4å¾Œ3)
   - è¤‡è£½æŒ‡ä»¤æ™‚ï¼šæä¾›å®Œæ•´å€¼

4. **è¡çªæª¢æ¸¬**ï¼š
   - å¦‚æœå…©é‚Šéƒ½æœ‰å€¼ä½†ä¸åŒï¼Œæ¨™è¨˜ç‚º conflict
   - æä¾›å»ºè­°ï¼šé€šå¸¸ä»¥ clawdbot.json ç‚ºæº–ï¼ˆå› ç‚ºæ˜¯æœ€æ–°çš„ï¼‰

---

## å¯¦ä½œé †åº

### Phase 1: å¾Œç«¯ API
1. å»ºç«‹ `/api/admin/settings/sync-status` ç«¯é»
2. å¯¦ä½œè¨­å®šå°ç…§è¡¨å’Œç‹€æ…‹æª¢æ¸¬é‚è¼¯
3. å¯¦ä½œ `/api/admin/settings/export-commands` ç«¯é»

### Phase 2: å‰ç«¯ UI
1. å»ºç«‹ SettingsSyncPage çµ„ä»¶
2. å¯¦ä½œè¨­å®šåˆ—è¡¨é¡¯ç¤º
3. å¯¦ä½œè¤‡è£½æŒ‡ä»¤ Modal

### Phase 3: æ•´åˆ
1. åŠ å…¥ Admin UI å°èˆª
2. åœ¨ Health é é¢åŠ å…¥æ‘˜è¦å¡ç‰‡
3. æ¸¬è©¦å®Œæ•´æµç¨‹

---

## é¡å¤–è€ƒé‡

### ä¿®æ­£ conflict-detector

åŒæ™‚ä¿®æ­£ `channel_residue` çš„èª¤å ±å•é¡Œï¼š

```typescript
// èˆŠé‚è¼¯ï¼ˆæœ‰å•é¡Œï¼‰
if (config.channels?.telegram && !env.TELEGRAM_BOT_TOKEN) {
  // æ¨™è¨˜ç‚º residue âŒ
}

// æ–°é‚è¼¯
if (config.channels?.telegram) {
  const hasValidToken = !!config.channels.telegram.botToken;
  const hasEnvToken = !!env.TELEGRAM_BOT_TOKEN;

  if (hasValidToken) {
    // æœ‰æœ‰æ•ˆçš„ tokenï¼Œä¸æ˜¯ residueï¼Œåªæ˜¯ã€ŒæœªåŒæ­¥åˆ°ç’°å¢ƒè®Šæ•¸ã€
    // æ”¹ç‚º info ç­‰ç´šï¼Œä¸å»ºè­° auto-fix
  } else if (!hasValidToken && !hasEnvToken) {
    // çœŸæ­£çš„ residueï¼šè¨­å®šå­˜åœ¨ä½†æ²’æœ‰ token
    // é€™æ‰éœ€è¦è­¦å‘Š
  }
}
```

---

## é æœŸæ•ˆæœ

1. **ç”¨æˆ¶èƒ½æ¸…æ¥šçœ‹åˆ°**ï¼šå“ªäº›è¨­å®šæœ‰ä¸Ÿå¤±é¢¨éšª
2. **ä¸€éµè¤‡è£½æŒ‡ä»¤**ï¼šæ–¹ä¾¿åŒæ­¥åˆ°ç’°å¢ƒè®Šæ•¸
3. **æ¸›å°‘ã€Œå‰ä¸–è¨˜æ†¶ã€å•é¡Œ**ï¼šé—œéµè¨­å®šæœ‰é›™é‡å‚™ä»½
4. **æ¶ˆé™¤èª¤å ±**ï¼šconflict-detector ä¸å†èª¤åˆ¤æ­£å¸¸è¨­å®š
